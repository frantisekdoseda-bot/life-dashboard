<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Life Dashboard</title>

<style>
body{
background:#0b0f14;
color:white;
font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto;
padding:16px;
margin:0;
}

.card{
background:#111723;
padding:18px;
border-radius:20px;
margin-bottom:16px;
box-shadow:0 10px 25px rgba(0,0,0,0.35);
}

.big{
font-size:30px;
font-weight:600;
}

.small{
opacity:.7;
font-size:13px;
margin-bottom:6px;
}

.row{
display:flex;
justify-content:space-between;
margin-top:6px;
font-size:15px;
}

.ok{color:#51cf66;}
.warn{color:#ff6b6b;}

input,textarea{
width:100%;
padding:14px;
border-radius:12px;
border:none;
background:#0b0f14;
color:white;
font-size:16px;
margin-top:8px;
}

button{
margin-top:10px;
width:100%;
padding:14px;
border:none;
border-radius:14px;
background:#3b82f6;
color:white;
font-size:16px;
}
</style>
</head>

<body>

<div class="card">
<div class="small">POČASÍ</div>
<div class="big" id="temp">--°C</div>
<div class="small" id="city" onclick="askCity()" style="cursor:pointer">nastavit město</div>
</div>

<div class="card">
<div class="small">TENTO TÝDEN</div>
<div class="big" id="spent">0 Kč</div>
<div class="row"><span>Limit</span><span>10 000 Kč</span></div>
<div class="row"><span>Zbývá</span><span id="left">10 000 Kč</span></div>
<div class="row"><span>Status</span><span id="status" class="ok">V pohodě</span></div>
</div>

<div class="card">
<div class="small">PŘIDAT VÝDAJ</div>
<input id="add" type="number" placeholder="Kolik Kč">
<button onclick="addMoney()">Přidat</button>
</div>

<div class="card">
<div class="small">POZNÁMKA</div>
<textarea placeholder="rychlá poznámka..."></textarea>
</div>

<script>
let total = localStorage.getItem("spent") ? Number(localStorage.getItem("spent")) : 0;
const limit = 10000;

function render(){
document.getElementById("spent").innerText = total + " Kč";
let left = limit-total;
if(left<0) left=0;
document.getElementById("left").innerText = left + " Kč";

if(total>limit){
document.getElementById("status").innerText="Přes limit";
document.getElementById("status").className="warn";
}else{
document.getElementById("status").innerText="V pohodě";
document.getElementById("status").className="ok";
}
}

function addMoney(){
let val = Number(document.getElementById("add").value);
if(!val) return;
total+=val;
localStorage.setItem("spent",total);
document.getElementById("add").value="";
render();
}

render();

let city = localStorage.getItem("city") || "Prague";

function askCity(){
let c = prompt("Zadej město:", city);
if(c){
city=c;
localStorage.setItem("city",c);
loadWeather();
}
}

function loadWeather(){
fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${city}`)
.then(r=>r.json())
.then(loc=>{
let lat=loc.results[0].latitude;
let lon=loc.results[0].longitude;

fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`)
.then(r=>r.json())
.then(data=>{
document.getElementById("temp").innerText=data.current_weather.temperature+"°C";
document.getElementById("city").innerText=city;
});
});
}

loadWeather();
</script>

</body>
</html>
